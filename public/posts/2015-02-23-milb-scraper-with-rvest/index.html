<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta name="generator" content="Hugo 0.62.2" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Let&#39;s Make a Minor League Baseball Database! | Michael Lee</title>

     
      
    
    
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="Let&#39;s Make a Minor League Baseball Database!" />
<meta property="og:description" content="To make our database we&#39;re going to use rvest, an R package designed by Hadley Wickham at RStudio [^1]. The package scrapes HTML from webpages and extracts it into readable data. Let&#39;s load the necessary packages and go from there:
#if you haven&#39;t done so already, install rvest from Wickham&#39;s github repository # install.packages(&#34;devtools&#34;) # install_github(&#34;hadley/rvest&#34;) c(&#39;rvest&#39;,&#39;dplyr&#39;) -&gt; packages #installs packages lapply(packages, library, character.only = T)# prep scraper url &lt;- &#34;http://www." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2015-02-23-milb-scraper-with-rvest/" />
<meta property="article:published_time" content="2015-02-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-02-23T00:00:00+00:00" />
 
    


 
    <meta name="twitter:site" content="@mikeleeco">
<meta name="twitter:creator" content="@mikeleeco">
<meta name="twitter:title" content="Let&#39;s Make a Minor League Baseball Database!" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://www.mikelee.co/img/bryant.jpg"/>
<meta name="twitter:description" content="A step-by-step tutorial to make your own Minor League Baseball Database using rvest."/> 
    
     
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-58518999-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
 
    
    
    <link rel="canonical" href="/posts/2015-02-23-milb-scraper-with-rvest/">   <link rel="icon" type="image/png" href="img/avatar-transparent.png">

    <link rel="stylesheet" href="/css/bulma.css">
    <link rel="stylesheet" href="/css/code-highlighting/highlight.min.css">
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link rel="stylesheet" href="/css/landing.css">   
    
    
</head>


<body>
    <header> <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

<nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="/">
        <img src="/img/avatar-icon.png" alt="Michael Lee">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/mikeleeco">
        <span class="icon">
            <i class="fab fa-github"></i>
          </span>
    </a>
    
    

    <a class="nav-item" target="blank" href="https://twitter.com/mikeleeco">
        <span class="icon">
            <i class="fab fa-twitter"></i>
          </span>
    </a>
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab " href="/posts"><span itemprop="name">Blog</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="/projects"><span itemprop="name">Projects</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="/interactives"><span itemprop="name">Interactives</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="/animation"><span itemprop="name">Animation</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="/resume/"><span itemprop="name">Resume</span></a>
        
</div>
</nav> </header>
    <main>


<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="content container">

                
                  <head>
  <link rel="stylesheet" href="/css/postCustom.css" />
  <script src="/js/hideOutput.js"></script>
</head>

<div class="container">
	<div class="column is-full-desktop">
	    <h1 class="title is-2">
	        Let&#39;s Make a Minor League Baseball Database!
	    </h1>
	    <h4>February 23, 2015</h4>
	    
	</div>
  
  <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>To make our database we're going to use <!-- raw HTML omitted -->rvest<!-- raw HTML omitted -->, an R package designed by Hadley Wickham at RStudio [^1]. The package scrapes HTML from webpages and extracts it into readable data. Let's load the necessary packages and go from there:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1">#if you haven&#39;t done so already, install rvest from Wickham&#39;s github repository</span>
<span class="c1"># install.packages(&#34;devtools&#34;)</span>
<span class="c1"># install_github(&#34;hadley/rvest&#34;)</span>
<span class="nf">c</span><span class="p">(</span><span class="s">&#39;</span><span class="s">rvest&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="s">dplyr&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">packages</span> <span class="c1">#installs packages</span>
<span class="nf">lapply</span><span class="p">(</span><span class="n">packages</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">character.only</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</code></pre></div><!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1"># prep scraper</span>
<span class="n">url</span> <span class="o">&lt;-</span> <span class="s">&#34;</span><span class="s">http://www.baseball-reference.com/minors/&#34;</span>
<span class="n">teams</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">ARI&#34;</span><span class="p">)</span>
<span class="n">stats_table</span> <span class="o">&lt;-</span> <span class="s">&#39;</span><span class="s">#team_batting.sortable.stats_table&#39;</span>
<span class="n">stats_id</span> <span class="o">&lt;-</span> <span class="nf">paste0</span><span class="p">(</span><span class="n">stats_table</span><span class="p">,</span><span class="s">&#39;</span><span class="s"> a&#39;</span><span class="p">)</span>
</code></pre></div><!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">minors_batting_ARI</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="p">)</span>

  <span class="c1"># for loop by teams and seasonfor (teams in teams){ </span>
  <span class="nf">for </span><span class="p">(</span><span class="n">season</span> <span class="n">in</span> <span class="m">2014</span><span class="o">:</span><span class="m">2012</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">html</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="s">&#34;</span><span class="s">affiliate.cgi?id=&#34;</span><span class="p">,</span><span class="n">teams</span><span class="p">,</span><span class="s">&#34;</span><span class="s">&amp;year=&#34;</span><span class="p">,</span><span class="n">season</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#34;</span><span class="s">&#34;</span><span class="p">)</span>

    <span class="c1"># batting stats</span>
    <span class="nf">read_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_nodes</span><span class="p">(</span><span class="n">stats_table</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_table</span><span class="p">(</span><span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">data.frame</span><span class="p">(</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">tbl_df</span><span class="p">(</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">df</span>
</code></pre></div><!-- raw HTML omitted -->
<p>This portion of code extracts the attributes of the URL in the table and changes them into characters:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r">    <span class="c1"># player info</span>
    <span class="nf">read_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_nodes</span><span class="p">(</span><span class="n">stats_id</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_attr</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;</span><span class="s">href&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">unlist</span> <span class="o">%&gt;%</span> <span class="n">as.character</span> <span class="o">-&gt;</span> <span class="n">min_playerid</span>
</code></pre></div><p>Using R formatting code we delete unnecessary rows and create a column called <!-- raw HTML omitted -->bref_player_id<!-- raw HTML omitted --> to assign each player's unique reference id. We're trimming out characters from the href attributes we don't need, leaving only the reference ids.</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r">    <span class="c1"># clean dataframe and add team and season info</span>
    <span class="n">df</span> <span class="o">&lt;-</span> <span class="n">df</span><span class="n">[1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="p">,</span><span class="n">]</span>
    <span class="n">df</span> <span class="o">&lt;-</span> <span class="n">df</span><span class="n">[</span><span class="o">!</span><span class="nf">na.omit</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">Rk</span><span class="o">==</span><span class="s">&#39;</span><span class="s">Rk&#39;</span><span class="p">)</span><span class="p">,</span><span class="n">]</span>
    <span class="n">df</span><span class="o">$</span><span class="n">season</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">season</span><span class="p">)</span>
    <span class="n">df</span><span class="o">$</span><span class="n">teams</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">teams</span><span class="p">)</span>

    <span class="c1"># remove url data</span>
    <span class="n">min_playerid</span><span class="o">=</span><span class="nf">gsub</span><span class="p">(</span><span class="s">&#34;</span><span class="s">/register/player.cgi?id=&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">min_playerid</span><span class="p">,</span><span class="n">fixed</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
    <span class="n">df</span><span class="o">$</span><span class="n">min_playerid</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">min_playerid</span><span class="p">)</span>

    <span class="c1"># bind to dataframe</span>
    <span class="n">minors_batting_ARI</span> <span class="o">&lt;-</span> <span class="nf">rbind</span><span class="p">(</span><span class="n">minors_batting_ARI</span><span class="p">,</span><span class="n">df</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="c1">#to view the dataset and save it as a .csv in our working directory</span>
<span class="nf">View</span><span class="p">(</span><span class="n">minors_batting_ARI</span><span class="p">)</span>
<span class="nf">write.csv</span><span class="p">(</span><span class="n">minors_batting_ARI</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">minors_batting_ARI.csv&#34;</span><span class="p">)</span>
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">teams</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">ARI&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">ATL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">BAL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">BOS&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CHC&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CHW&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CIN&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CLE&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">COL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">DET&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">HOU&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">KCR&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">ANA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">LAD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">FLA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">MIL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">MIN&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">NYM&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">NYY&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">OAK&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">PHI&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">PIT&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SDP&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SFG&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SEA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">STL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TBD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TEX&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TOR&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">WSN&#34;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">url</span> <span class="o">&lt;-</span> <span class="s">&#34;</span><span class="s">http://www.baseball-reference.com/minors/&#34;</span>
<span class="n">teams</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">ARI&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">ATL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">BAL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">BOS&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CHC&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CHW&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CIN&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">CLE&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">COL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">DET&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">HOU&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">KCR&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">ANA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">LAD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">FLA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">MIL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">MIN&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">NYM&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">NYY&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">OAK&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">PHI&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">PIT&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SDP&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SFG&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">SEA&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">STL&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TBD&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TEX&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TOR&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">WSN&#34;</span><span class="p">)</span>
<span class="n">stats_table</span> <span class="o">&lt;-</span> <span class="s">&#39;</span><span class="s">#team_batting.sortable.stats_table&#39;</span>
<span class="n">stats_id</span> <span class="o">&lt;-</span> <span class="nf">paste0</span><span class="p">(</span><span class="n">stats_table</span><span class="p">,</span><span class="s">&#39;</span><span class="s"> a&#39;</span><span class="p">)</span>
<span class="n">minors_batting</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="p">)</span>

<span class="c1"># for loop by teams and season</span>
<span class="nf">for </span><span class="p">(</span><span class="n">teams</span> <span class="n">in</span> <span class="n">teams</span><span class="p">)</span><span class="p">{</span> 
  <span class="nf">for </span><span class="p">(</span><span class="n">season</span> <span class="n">in</span> <span class="m">2014</span><span class="o">:</span><span class="m">2014</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">html</span> <span class="o">&lt;-</span> <span class="nf">paste</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="s">&#34;</span><span class="s">affiliate.cgi?id=&#34;</span><span class="p">,</span><span class="n">teams</span><span class="p">,</span><span class="s">&#34;</span><span class="s">&amp;year=&#34;</span><span class="p">,</span><span class="n">season</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#34;</span><span class="s">&#34;</span><span class="p">)</span>

    <span class="c1"># batting stats</span>
    <span class="nf">read_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_nodes</span><span class="p">(</span><span class="n">stats_table</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_table</span><span class="p">(</span><span class="n">header</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">data.frame</span><span class="p">(</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">tbl_df</span><span class="p">(</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">df</span>

    <span class="c1"># player info</span>
    <span class="nf">read_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_nodes</span><span class="p">(</span><span class="n">stats_id</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="nf">html_attr</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;</span><span class="s">href&#34;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">unlist</span> <span class="o">%&gt;%</span> <span class="n">as.character</span> <span class="o">-&gt;</span> <span class="n">min_playerid</span>

    <span class="c1"># clean dataframe and add team and season info</span>
    <span class="n">df</span> <span class="o">&lt;-</span> <span class="n">df</span><span class="n">[1</span><span class="o">:</span><span class="nf">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="p">,</span><span class="n">]</span>
    <span class="n">df</span> <span class="o">&lt;-</span> <span class="n">df</span><span class="n">[</span><span class="o">!</span><span class="nf">na.omit</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">Rk</span><span class="o">==</span><span class="s">&#39;</span><span class="s">Rk&#39;</span><span class="p">)</span><span class="p">,</span><span class="n">]</span>
    <span class="n">df</span><span class="o">$</span><span class="n">season</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">season</span><span class="p">)</span>
    <span class="n">df</span><span class="o">$</span><span class="n">teams</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">teams</span><span class="p">)</span>

    <span class="c1"># remove url data</span>
    <span class="n">min_playerid</span><span class="o">=</span><span class="nf">gsub</span><span class="p">(</span><span class="s">&#34;</span><span class="s">/register/player.cgi?id=&#34;</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">min_playerid</span><span class="p">,</span><span class="n">fixed</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
    <span class="n">df</span><span class="o">$</span><span class="n">min_playerid</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">min_playerid</span><span class="p">)</span>

    <span class="c1"># bind to </span>
    <span class="n">minors_batting</span> <span class="o">&lt;-</span> <span class="nf">rbind</span><span class="p">(</span><span class="n">minors_batting</span><span class="p">,</span><span class="n">df</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>To query other seasons or teams, simply change the information selected. For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">teams</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&#34;</span><span class="s">OAK&#34;</span><span class="p">,</span><span class="s">&#34;</span><span class="s">TBD&#34;</span><span class="p">)</span>

<span class="n">stats_table</span> <span class="o">&lt;-</span> <span class="s">&#39;</span><span class="s">#team_batting.sortable.stats_table&#39;</span>
<span class="n">stats_id</span> <span class="o">&lt;-</span> <span class="nf">paste0</span><span class="p">(</span><span class="n">stats_table</span><span class="p">,</span><span class="s">&#39;</span><span class="s"> a&#39;</span><span class="p">)</span>
<span class="n">minors_batting</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="p">)</span>

<span class="nf">for </span><span class="p">(</span><span class="n">teams</span> <span class="n">in</span> <span class="n">teams</span><span class="p">)</span><span class="p">{</span> <span class="nf">for </span><span class="p">(</span><span class="n">season</span> <span class="n">in</span> <span class="m">2010</span><span class="o">:</span><span class="m">2005</span><span class="p">)</span> <span class="p">{</span>
</code></pre></div><p>Will pull in minor league batting statistics for Oakland and Tampa Bay for the years 2005-2010.</p>
<p>Lets clean up all of the stray objects besides the <!-- raw HTML omitted -->minors_batting<!-- raw HTML omitted --> dataframe in our working environment before moving on:</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">rm</span><span class="p">(</span><span class="n">list</span><span class="o">=</span><span class="nf">setdiff</span><span class="p">(</span><span class="nf">ls</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="s">&#34;</span><span class="s">minors_batting&#34;</span><span class="p">)</span><span class="p">)</span>
</code></pre></div><!-- raw HTML omitted -->
<p>This code is querying 30 distinct URLs for every season, so multi-season outputs can take some time. Here are my system.time indicators for the above function:</p>
<!-- raw HTML omitted -->
<p>The query takes about a 1:45 for every league-wide season pull. <!-- raw HTML omitted -->Pro-Tip!<!-- raw HTML omitted --> Get that query going and have some breakfast/lunch/dinner.</p>
<!-- raw HTML omitted -->
<p>Stay tuned to the site for another post about similarity scores and to learn more about Kris Bryant's best comparisons.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Baseball Reference has made slight alterations to their website that has deprecated the code above as originally published. An updated version of the scraper code can be found <!-- raw HTML omitted -->here<!-- raw HTML omitted -->.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->


</div>

                
                
                </div>
                <br>
            </div>
        </section>
    </div>
</div>

</main>
    <footer> 
  <footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        Michael Lee - 2020
      </p>
    </div>
  </div>
</footer> 
</footer>

    <script async type="text/javascript" src="/js/bulma.js"></script>
</body>

</html>