<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>mikelee.co: Powered by RMarkdown, knitr, and Jekyll</title>
  <meta property="og:title" content="mikelee.co: Powered by RMarkdown, knitr, and Jekyll" />
  <meta name="twitter:title" content="mikelee.co: Powered by RMarkdown, knitr, and Jekyll" />
  <meta name="description" content="Generating blog content made easier with R">
  <meta property="og:description" content="Generating blog content made easier with R">
  <meta name="twitter:description" content="Generating blog content made easier with R">
  <meta name="author" content="Michael Lee"/>
  <link href='/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/avatar-icon.png" />
  <meta name="twitter:image" content="/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@mikeleeco" />
  <meta name="twitter:creator" content="@mikeleeco" />
  <meta property="og:url" content="/posts/2016-05-24-mikeleeco-powered-by-rmarkdown/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Michael Lee" />

  <meta name="generator" content="Hugo 0.19" />
  <link rel="canonical" href="/posts/2016-05-24-mikeleeco-powered-by-rmarkdown/" />
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Michael Lee">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="//css/pygment_highlights.css" />
  <link rel="stylesheet" href="//css/highlight.min.css" />
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Michael Lee</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/posts">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Projects" href="/projects">Projects</a>
            </li>
          
        
          
            <li>
              <a title="Interactives" href="/interactives">Interactives</a>
            </li>
          
        
          
            <li>
              <a title="Animation" href="/animation">Animation</a>
            </li>
          
        
          
            <li>
              <a title="Resume" href="/resume/">Resume</a>
            </li>
          
        
        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Michael Lee" href="/">
            <img class="avatar-img" src="//img/avatar-icon.png" alt="Michael Lee" />
          </a>
        
      </div>
    </div>

  </div>
</nav>



    
  
  
  




  
    <div id="header-big-imgs" data-num-img=1 data-img-src-1="/img/jekyll-blog.jpg" data-img-desc-1="R and Jekyll">
    </div>
  

  <header class="header-section has-img">
    
      <div class="intro-header big-img">
        <span class="img-desc" style="display: inline;"></span>
      </div>
    



    <div class="container" role="main">
      
        <head>
  <link rel="stylesheet" href="//css/postCustom.css" />
</head>

<div class="container">
  <div class="row">
    <div class="col-lg-12 col-lg-offset-0">

            <h2 class="post-title">mikelee.co: Powered by RMarkdown, knitr, and Jekyll</h2>

    
      <h3 class="post-subtitle">
        Generating blog content made easier with R
      </h3>
    
      
    
      <p class="post-meta">
        Posted on May 24, 2016
      </p>
    
      
  
    <span class="post-meta">
      
        <span class="post-tags"><a href="/tags/r">#R</a></span>&nbsp;
      
        <span class="post-tags"><a href="/tags/knitr">#knitr</a></span>&nbsp;
      
        <span class="post-tags"><a href="/tags/jekyll">#Jekyll</a></span>&nbsp;
      
        <span class="post-tags"><a href="/tags/rmarkdown">#RMarkdown</a></span>&nbsp;
      
    </span>
  

        <blockquote>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com">http://rmarkdown.rstudio.com</a>.</p>
</blockquote>

<p>Spend a few months documenting code scripts in RStudio and you&rsquo;ll have surely seen those introductory lines numerous times.</p>

<p>This is also a R code script. And a markdown document. And an HTML page. All of which are generated within one .Rmd document. My site had previously supported by Github Pages and Jekyll, and now my preferred statistical software tool will streamline my blogging process. I expect this to make the transition from idea, analyses, visualization, and blog post production much more seamless.</p>

<p><strong>Inspiration and First Steps</strong></p>

<p>I first heard about the ability to generate and serve files within R from a tweet from Brendan Rocks:</p>

<p><blockquote class="twitter-tweet" align="center" data-lang="en"><p lang="en" dir="ltr">Post on my BARUG talk tonight: Blogging w/ <a href="https://twitter.com/hashtag/rstats?src=hash">#rstats</a> &amp; knitr-jekyll (all credit to <a href="https://twitter.com/xieyihui">@xieyihui</a>!) <a href="https://t.co/PsGXbyXZJa">https://t.co/PsGXbyXZJa</a> <a href="https://t.co/eZycscbmup">pic.twitter.com/eZycscbmup</a></p>&mdash; Brendan Rocks (@rocksbrendan) <a href="https://twitter.com/rocksbrendan/status/656564982885146625">October 20, 2015</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>This workflow blew my mind at the time (still does) and the post in which he explains the scaffolding is very useful. Check it out <a href="https://brendanrocks.com/blogging-with-rmarkdown-knitr-jekyll/">here</a>.</p>

<p>Adding in a <a href="https://github.com/mikeleeco/mikeleeco.github.com/tree/master/_source/2016-05-24-mikeleeco-powered-by-rmarkdown.Rmd"><code>_source</code></a> directory to store .Rmd files allows   Yihui Xie&rsquo;s <a href="https://github.com/yihui/servr">servr package</a> the ability to render markdown documents in  <a href="https://github.com/mikeleeco/mikeleeco.github.com/tree/master/_posts/2016-05-24-mikeleeco-powered-by-rmarkdown.md"><code>_posts</code></a>, which Jekyll converts to HTML - which is what you are reading now!</p>

<p><strong>Improving Syntax Highlighting</strong> <em>(with updates!)</em></p>

<p>The first part of this post was pretty trivial given my previous experience with both jekyll and knitr. Adjusting syntax highlighting was a bit of a hiccup. Out of the box, code blocks in divs were being generated using my highlighter (rouge) but were being rendered with an &ldquo;r&rdquo; in front like so:</p>

<p><code>r</code><code>cat(paste(c(&quot;This&quot;,&quot;drove&quot;,&quot;me&quot;,&quot;mental D:&quot;),sep=&quot; &quot;))</code></p>

<p><code>## This drove me mental D:</code></p>

<p>An earlier version of this post detailed a method of updating syntax highlighting using redcarpet markdown and pygments - a soon to be deprecated syntax highlighter. Turns out I wasn&rsquo;t the only one having this issue! After more than a few missteps, and applying the advice from <a href="https://github.com/jekyll/jekyll/issues/1342">this post</a>, make sure you have both jekyll <a href="https://rubygems.org/pages/download">ruby</a> installed and updated! After updating your site infrastructure, add a css template with formatting options - such as my <a href="https://github.com/mikeleeco/mikeleeco.github.com/tree/master/public/css/syntax.css"><code>syntax.css</code></a>.</p>

<p><strong>Final Result</strong></p>

<pre><code class="language-r">cat(paste(c(&quot;Yay&quot;,&quot;for&quot;,&quot;making&quot;,&quot;life&quot;,&quot;easier!&quot;),sep=&quot; &quot;))
</code></pre>

<pre><code>## Yay for making life easier!
</code></pre>

<p>Look how great that looks! Lets see what a function looks like.</p>

<pre><code class="language-r">devtools::install_github(&quot;mdlee12/sabr&quot;)
library(sabr)
sabr::woba_season
function (playerID = NULL, yearID = NULL, ...) 
{
    db &lt;- lahman()
    woba_guts &lt;- RSQLite::dbGetQuery(db, &quot;SELECT * FROM wOBA_Table&quot;)
    wobayear &lt;- woba_guts[woba_guts$yearID == yearID, ]
    wobayear &lt;- data.frame(wobayear)
    query &lt;- paste(&quot;SELECT GROUP_CONCAT(DISTINCT teamID) as teamID, 
                   SUM(H) as H, SUM([2B]) as DB, SUM([3B]) as TR,SUM(HR) as HR, 
                   SUM(AB) as AB, SUM(BB) as BB, SUM(IBB) as IBB, SUM(SF) as SF, 
                   SUM(SH) as SH, SUM(HBP) as HBP FROM Batting WHERE playerID = '&quot;, 
                   playerID, &quot;' AND yearID = '&quot;, yearID, &quot;'&quot;, sep = &quot;&quot;)
    db &lt;- lahman()
    query &lt;- RSQLite::dbGetQuery(db, query)
    query &lt;- as.data.frame(query)
    uBB &lt;- wobayear$wobaBB * (query$BB - query$IBB)
    HBP &lt;- wobayear$wobaHB * (query$HBP)
    DB &lt;- wobayear$woba2B * (query$DB)
    TR &lt;- wobayear$woba3B * (query$TR)
    HR &lt;- wobayear$wobaHR * (query$HR)
    H &lt;- wobayear$woba1B * (query$H - query$DB - query$TR - query$HR)
    AB &lt;- query$AB
    BB &lt;- query$BB
    IBB &lt;- query$IBB
    SF &lt;- query$SF
    SH &lt;- query$SH
    PA &lt;- query$PA
    woba &lt;- (uBB + HBP + H + DB + TR + HR)/(AB + BB - IBB + SF + HBP)
    woba
}
</code></pre>

<div class="row"><div class="col-sm-6  col-sm-offset-3"><img src="http://i.imgur.com/Z0MX0qd.gif" class="img-responsive center-block"/></div></div>

<p>How about some numbers:</p>

<pre><code class="language-r">6*9
</code></pre>

<pre><code>## [1] 54
</code></pre>

<pre><code class="language-r">sabr::woba_season(&quot;yountro01&quot;,1982)
</code></pre>

<pre><code>## [1] 0.414997
</code></pre>

<p>You can also embed plots. For example:</p>

<pre><code class="language-r"># Much plots. Such scatter.
plot(iris)
</code></pre>

<p><img src="/img/figure/source/2016-05-24-mikeleeco-powered-by-rmarkdown/unnamed-chunk-6-1.png" title="plot of chunk unnamed-chunk-6" alt="plot of chunk unnamed-chunk-6" style="display: block; margin: auto;" /></p>

<p>More to come soon :D</p>


              <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/posts/2016-05-28-sabr-R-package/" data-toggle="tooltip" data-placement="top" title="sabr - R package">&larr; Previous Post</a>
          </li>
        
        
        
          <li class="next">
            <a href="/posts/2016-06-01-NBA-Draft-Odds-Plot/" data-toggle="tooltip" data-placement="top" title="NBA Draft Odds Plot">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mikeleeco';
    var disqus_identifier = '\/posts\/2016-05-24-mikeleeco-powered-by-rmarkdown\/';
    var disqus_title = 'mikelee.co: Powered by RMarkdown, knitr, and Jekyll';
    var disqus_url = '\/posts\/2016-05-24-mikeleeco-powered-by-rmarkdown\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
      

    </div>
  </div>
</div>

      
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-lg-offset-0">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="//index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          Michael Lee
          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="/">Michael Lee</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.19</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="//js/main.js"></script>
<script src="//js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>






<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-58518999-1', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
