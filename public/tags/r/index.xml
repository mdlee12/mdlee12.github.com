<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>R on Michael Lee</title>
    <link>/tags/r/index.xml</link>
    <description>Recent content in R on Michael Lee</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>mdlee12@gmail.com (Michael Lee)</managingEditor>
    <webMaster>mdlee12@gmail.com (Michael Lee)</webMaster>
    <atom:link href="/tags/r/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Average cumulative student loan balance for graduate school completers, by degree type: Selected years, 2000-2016</title>
      <link>/animation/2018-05-23-animated-line-chart-cumulative-student-loan-balance/</link>
      <pubDate>Wed, 23 May 2018 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2018-05-23-animated-line-chart-cumulative-student-loan-balance/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
Among grad school completers in 2015–16 who took out &lt;a href=&#34;https://twitter.com/hashtag/studentloans?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#studentloans&lt;/a&gt;, the avg. balance was highest for those completing a professional doctorate ($186,600). Learn more in our NEW &lt;a href=&#34;https://twitter.com/hashtag/COE2018?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#COE2018&lt;/a&gt; Spotlight: &lt;a href=&#34;https://t.co/Yr9DzkGYMS&#34;&gt;https://t.co/Yr9DzkGYMS&lt;/a&gt; &lt;a href=&#34;https://t.co/o7AvnRRjcH&#34;&gt;pic.twitter.com/o7AvnRRjcH&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/999323515215020034?ref_src=twsrc%5Etfw&#34;&gt;May 23, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/lineEducationLoans.gif&#34; alt=&#34;Average cumulative student loan balance for graduate school completers, by degree type: Selected years, 2000-2016&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Average cumulative student loan balance for graduate school completers, by degree type: Selected years, 2000-2016&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Seasonal Virgin River Narrows Discharge</title>
      <link>/posts/2018-04-16-hiking-the-narrows/</link>
      <pubDate>Mon, 16 Apr 2018 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/posts/2018-04-16-hiking-the-narrows/</guid>
      <description>&lt;p&gt;This April I’m visiting Zion National Park, one of North America’s most interesting locations to explore geologic formations. One such venue in the park is an iconic hike referred to as &lt;em&gt;The Narrows&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/narrows.jpg&#34; alt=&#34;The Narrows in Zion National Park&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;The Narrows in Zion National Park&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;It’s surely even more sensational in person.&lt;/p&gt;
&lt;p&gt;Unfortunately, there’s a catch: the Virgin River, a Colorado river tributary that shaped the distinct rock walls of The Narrows, has seasonal water level changes that can force hikers to trek waist deep in the river or close the route entirely. Online sources confirmed my intuition that the spring run-off leads to closures, but I was curious the extent of seasonality. Let’s dig into it!&lt;/p&gt;
&lt;div id=&#34;accessing-the-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Accessing the data&lt;/h2&gt;
&lt;p&gt;The provisional data for the East Fork of the Virgin River can be easily &lt;a href=&#34;https://waterdata.usgs.gov/ut/nwis/uv?cb_00065=on&amp;amp;cb_00060=on&amp;amp;format=gif_default&amp;amp;period=60&amp;amp;begin_date=&amp;amp;end_date=&amp;amp;site_no=09404900&#34;&gt;accessed via the USGS website&lt;/a&gt;, including discharge and gage height. I’ll focus on the discharge levels here, since the speed of the river (and not it’s height) is what seems to precipitate closures. The speed threshold that merits closure of The Narrows was inconsistent across the sites I investigated (if you know leave a comment), but the level I saw most often - 150 cfs - is what I will use.&lt;/p&gt;
&lt;p&gt;A brief aside: the USGS logs some super interesting data to visualize time series. Here are some continually updated &lt;a href=&#34;https://waterdata.usgs.gov/ut/nwis/uv?cb_00065=on&amp;amp;cb_00060=on&amp;amp;format=gif_default&amp;amp;period=60&#34;&gt;sources of water data for Utah&lt;/a&gt;, for example. So much to explore!&lt;/p&gt;
&lt;p&gt;Back to The Narrows data. So we’ve got out the csv and it was completely clean like always the end! Not.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;cleaning-the-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Cleaning the data&lt;/h2&gt;
&lt;p&gt;There was quite a few strange coding choices made through the years accessed (1993 - 2018). What follows are those gory recoding details. One nifty function I learned more about was &lt;code&gt;dplyr::separate&lt;/code&gt; which allows you to specify the direction you’d like to merge the characters you’re separating. This allowed me to push values of &lt;code&gt;0 seconds&lt;/code&gt; ino the seconds column, even though there were some values where there were no adjoining hours or minutes attached. Nifty!&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
library(animation)
library(grid)
x &amp;lt;- read.csv(&amp;quot;/home/michael/Documents/website/narrows/narrows.csv&amp;quot;, row.names = NULL, stringsAsFactors = FALSE)
x &amp;lt;- x[1:530086,]
x2 &amp;lt;- read.csv(&amp;quot;/home/michael/Documents/website/narrows/narrows2.csv&amp;quot;, row.names = NULL, stringsAsFactors = FALSE)
x &amp;lt;- rbind(x,x2)
rm(x2)
x &amp;lt;- x %&amp;gt;% separate(datetime, c(&amp;quot;date&amp;quot;, &amp;quot;time&amp;quot;), &amp;quot; &amp;quot;, extra = &amp;quot;merge&amp;quot;)
x$date &amp;lt;- mdy(x$date)
x$timeparse &amp;lt;- hm(x$time)
x &amp;lt;- x %&amp;gt;% separate(timeparse, c(&amp;quot;hour&amp;quot;, &amp;quot;minute&amp;quot;, &amp;quot;second&amp;quot;), &amp;quot; &amp;quot;, extra = &amp;quot;merge&amp;quot;, fill = &amp;quot;left&amp;quot;)
x$hour &amp;lt;- gsub(&amp;quot;H&amp;quot;, &amp;quot;&amp;quot;, x$hour)
x$minute &amp;lt;- gsub(&amp;quot;M&amp;quot;, &amp;quot;&amp;quot;, x$minute)
x$second &amp;lt;- gsub(&amp;quot;S&amp;quot;, &amp;quot;&amp;quot;, x$second)
x[,c(&amp;quot;hour&amp;quot;,&amp;quot;minute&amp;quot;,&amp;quot;second&amp;quot;)] &amp;lt;- sapply(x[,c(&amp;quot;hour&amp;quot;,&amp;quot;minute&amp;quot;,&amp;quot;second&amp;quot;)], as.numeric)
x$hour &amp;lt;- ifelse(is.na(x$hour),0 ,x$hour)
x$minute &amp;lt;- ifelse(is.na(x$minute),0 ,x$minute)
x$hour &amp;lt;- ifelse(grepl(&amp;quot;PM&amp;quot;, x$time), x$hour + 12,x$hour)
x$hour &amp;lt;- ifelse(nchar(x$hour) &amp;lt; 2, paste0(&amp;quot;0&amp;quot;,as.character(x$hour)),as.character(x$hour))
x$minute &amp;lt;- ifelse(nchar(x$minute) &amp;lt; 2, paste0(&amp;quot;0&amp;quot;,as.character(x$minute)),as.character(x$minute))
x$second &amp;lt;- ifelse(nchar(x$second) &amp;lt; 2, paste0(&amp;quot;0&amp;quot;,as.character(x$second)),as.character(x$second))
x$hour &amp;lt;- ifelse(grepl(&amp;quot;24&amp;quot;, x$hour), &amp;quot;00&amp;quot;,x$hour)
x$timeUpdate &amp;lt;- paste(x$hour,x$minute,x$second, sep = &amp;quot;:&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The full data source as an &lt;strong&gt;.Rdata&lt;/strong&gt; file can be accessed through &lt;a href=&#34;https://mikelee.co/data/narrows.Rdata&#34;&gt;this link&lt;/a&gt;:&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;drill-down-and-visualize&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Drill down and visualize&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;dplyr&lt;/code&gt; and &lt;code&gt;lubridate&lt;/code&gt; package make it easy to extract seasonality in the data:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dischargeByDay &amp;lt;- x %&amp;gt;% mutate(day = yday(date)) %&amp;gt;%
  group_by(day) %&amp;gt;%
  summarise(avgDischarge = mean(discharge, na.rm = TRUE))

dischargeByDay$day &amp;lt;- as.Date(as_date(dischargeByDay$day))
dischargeByDay$month &amp;lt;- month(dischargeByDay$day, label = TRUE)

plot(dischargeByDay$day, dischargeByDay$avgDischarge)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2018-04-16-hiking-the-narrows_files/figure-html/drill%20down-1.png&#34; width=&#34;1260&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This result is convincing on it’s own: on average from 1993 to 2018, after about 100 days and lasting until about the 160th day (Apri 10th - June 10th), the discharge level breaks the 150 cfs threshold that closes The Narrows hiking route.&lt;/p&gt;
&lt;p&gt;Lets take this result and make it more visually engaging by adding some animation.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;start-with-our-skeleton-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Start with our skeleton plot&lt;/h2&gt;
&lt;p&gt;I’ve been poking around with image dimensions and themes for distribution through twitter, and the following theme seems to be a quality balance between plot elements:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_white &amp;lt;- theme(text = element_text(family=&amp;quot;Open Sans&amp;quot;, color = &amp;quot;black&amp;quot;),
                     panel.grid = element_blank(),
                     panel.border = element_blank(),
                     axis.title.x=element_text(size=26, family = &amp;quot;Open Sans&amp;quot;, margin = margin(t=15, b = 0)),
                     axis.title.y=element_text(size=26, family = &amp;quot;Open Sans&amp;quot;, margin = margin(r=15, l = 5)),
                     axis.text.x=element_text(size=22, hjust = 0, family = &amp;quot;Open Sans Light&amp;quot;),
                     axis.text.y=element_text(size=22, family = &amp;quot;Open Sans Light&amp;quot;),
                     axis.ticks = element_blank(),           
                     plot.title=element_text(size=34,family = &amp;quot;Open Sans Extrabold&amp;quot;,hjust= 0,lineheight=1, margin = margin(t = 15)),
                     plot.subtitle=element_text(size=26, margin = margin(t=15, b = 5),family = &amp;quot;Open Sans&amp;quot;),
                     plot.caption=element_text(size=18, hjust = 0,margin=margin(t=15, b = 15),lineheight=1.15, family = &amp;quot;Open Sans&amp;quot;),
                     legend.position=&amp;quot;none&amp;quot;
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It’s important to impelement limits and breaks in the y and x scales to keep the axes stable when using ggplot2 for animation. Otherwise, the plot axes will expand according to the subset of data used in the figure.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg &amp;lt;- ggplot(dischargeByDay, aes(x = day, y = avgDischarge, group = 1)) +
  scale_y_continuous(limits = c(0, 350), expand = c(0,0)) +
  scale_x_date(date_breaks = &amp;quot;1 month&amp;quot;, date_labels =  &amp;quot;%b&amp;quot;, expand = c(0,0),limits = c(min(dischargeByDay$day)-1,max(dischargeByDay$day)-2)) +
  labs(title = &amp;quot;Mean Flow of the VIRGIN RIVER NARROWS by day (1993 - 2018)&amp;quot;,
       subtitle = &amp;quot;If the river is flowing at over 150 Cubic Feet per Second (CFS) the narrows is closed&amp;quot;,
       caption = &amp;quot;Data Accessed 3/16/2018, retrieved via https://nwis.waterdata.usgs.gov/usa/nwis/uv/&amp;quot;) +
  xlab(&amp;quot;Date&amp;quot;) + ylab(&amp;quot;Average Discharge&amp;quot;) +
  theme_bw() + theme_white
gg&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/gg.png&#34; alt=&#34;Mean Flow of the VIRGIN RIVER NARROWS by day (1993 - 2018)&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Mean Flow of the VIRGIN RIVER NARROWS by day (1993 - 2018)&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;We’ll then use &lt;code&gt;tweenr&lt;/code&gt; and &lt;code&gt;animation&lt;/code&gt; to refine the visualization with smooth transitions.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;animate-all-the-things&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animate all the things!&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gifReplicate &amp;lt;- function(x) {
  grid.newpage()
  grid.draw(x)
}

yDates &amp;lt;- seq(from = 0, to = max(as.numeric(dischargeByDay$day)), by = 3)
yDates[1] &amp;lt;- 1

saveGIF({

  for (i in yDates) {
    
    gg2 &amp;lt;- gg + geom_point(data = subset(dischargeByDay, day &amp;lt;=i), aes(x = day, y = avgDischarge), alpha = .1)
    g &amp;lt;- ggplotGrob(gg2)
    g$layout$l[g$layout$name == &amp;quot;title&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;caption&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;subtitle&amp;quot;] &amp;lt;- 3
    grid::grid.draw(g); 
    grid.newpage()
  }
  
  grid::grid.draw(g); 
  replicate(10,gifReplicate(g))

  for (i in seq(from =1, to = 366, by = 7)) {
    
    gg3 &amp;lt;- gg2 + geom_segment(x = 1, xend = i, y = 150,yend = 150, color= &amp;quot;red&amp;quot;, linetype = 2) 
    g &amp;lt;- ggplotGrob(gg3)
    g$layout$l[g$layout$name == &amp;quot;title&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;caption&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;subtitle&amp;quot;] &amp;lt;- 3
    grid::grid.draw(g); 
    grid.newpage()
  }
  
  for (i in yDates) {
    
    gg4 &amp;lt;- gg3 + stat_smooth(data = subset(dischargeByDay, day &amp;lt;=i), aes(x = day), se = F, method = &amp;quot;lm&amp;quot;, formula = y ~ poly(x, 20))
    g &amp;lt;- ggplotGrob(gg4)
    g$layout$l[g$layout$name == &amp;quot;title&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;caption&amp;quot;] &amp;lt;- 3
    g$layout$l[g$layout$name == &amp;quot;subtitle&amp;quot;] &amp;lt;- 3
    grid::grid.draw(g); 
    grid.newpage()
  }
  
  grid::grid.draw(g); 
  replicate(100,gifReplicate(g))
  # grid.draw(gg4)
  # geom_hline(yintercept = 150, color= &amp;quot;red&amp;quot;, linetype = 2) + 
  #   geom_line(aes(x=day, y=avgDischarge), size=1.3) +
},movie.name=paste0(getwd(),&amp;quot;/narrowsLarge.gif&amp;quot;),interval = .02, ani.width = 1200, ani.height = 800)

gif_compress &amp;lt;- function(ingif, outgif, show=TRUE, extra.opts=&amp;quot;&amp;quot;){
  command &amp;lt;-  sprintf(&amp;quot;gifsicle -O3 %s &amp;lt; %s &amp;gt; %s&amp;quot;, extra.opts, ingif, outgif)
  system.fun &amp;lt;- if (.Platform$OS.type == &amp;quot;windows&amp;quot;) shell else system
  if(show) message(&amp;quot;Executing: &amp;quot;, strwrap(command, exdent = 2, prefix = &amp;quot;\n&amp;quot;))
  system.fun(ifelse(.Platform$OS.type == &amp;quot;windows&amp;quot;, sprintf(&amp;quot;\&amp;quot;%s\&amp;quot;&amp;quot;, shQuote(command)), command))
}

gif_compress(paste0(getwd(),&amp;quot;/narrowsLarge.gif&amp;quot;),
             paste0(getwd(),&amp;quot;/narrowsLargeTall.gif&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/narrowsLargeTall.gif&#34; alt=&#34;Mean Flow of the VIRGIN RIVER NARROWS by day (1993 - 2018)&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Mean Flow of the VIRGIN RIVER NARROWS by day (1993 - 2018)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;addendum---further-data-exploration-needed&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Addendum - Further Data Exploration Needed:&lt;/h3&gt;
&lt;p&gt;After generating this animation and before sitting down to write this post, I explored the data a little bit more. To my delight (or chagrin) there appears to be a daily pattern to the discharge level. Looking at just April results, the discharge level decreases from 2pm to 5pm before reversing course and increasing until about 2am.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dischargeByAprilHour &amp;lt;- x %&amp;gt;% filter(month(date) == 4) %&amp;gt;%
  mutate(day = yday(date)) %&amp;gt;%
  group_by(hour) %&amp;gt;%
  summarise(avgDischarge = mean(discharge, na.rm = TRUE))
plot(dischargeByAprilHour$hour, dischargeByAprilHour$avgDischarge)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2018-04-16-hiking-the-narrows_files/figure-html/daily%20changes%20in%20April-1.png&#34; width=&#34;1260&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;An exploration for another day or another analyst!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Percentage of revenue for elementary and secondary public schools</title>
      <link>/animation/2018-02-12-animated-line-school-revenue/</link>
      <pubDate>Mon, 12 Feb 2018 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2018-02-12-animated-line-school-revenue/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
NEW Finding: Federal sources accounted for approx. 9% of the total funding for &lt;a href=&#34;https://twitter.com/hashtag/K12?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#K12&lt;/a&gt; public schools in both 2005–06 and 2014 –15. &lt;a href=&#34;https://t.co/G16loc8pyW&#34;&gt;https://t.co/G16loc8pyW&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/Education?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Education&lt;/a&gt; &lt;a href=&#34;https://t.co/CFuRjcqMIS&#34;&gt;pic.twitter.com/CFuRjcqMIS&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/963158870557421568?ref_src=twsrc%5Etfw&#34;&gt;February 12, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/lineSchool_Revenue.gif&#34; alt=&#34;Percentage of revenue for elementary and secondary public schools&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Percentage of revenue for elementary and secondary public schools&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Highest and lowest spending states per public education pupil</title>
      <link>/animation/2018-01-29-animated-line-chart-expenditures/</link>
      <pubDate>Mon, 29 Jan 2018 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2018-01-29-animated-line-chart-expenditures/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
DYK? Current expenditures per pupil ranged from $6,751 in Utah to $20,744 in New York for FY 2015: &lt;a href=&#34;https://t.co/FDcsYpjmcj&#34;&gt;https://t.co/FDcsYpjmcj&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/Finance?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Finance&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/Education?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Education&lt;/a&gt; &lt;a href=&#34;https://t.co/r5kUgNE4vF&#34;&gt;pic.twitter.com/r5kUgNE4vF&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/956970572189241344?ref_src=twsrc%5Etfw&#34;&gt;January 26, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/barState_Expenditure.gif&#34; alt=&#34;Current Expenditures per pupil in the lowest and highest spending states&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Current Expenditures per pupil in the lowest and highest spending states&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Wisconsin State Hex Grid - Mapping 2016 Presidential Results</title>
      <link>/posts/2017-11-16-wi-presidential-results-using-hexmapr/</link>
      <pubDate>Thu, 16 Nov 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/posts/2017-11-16-wi-presidential-results-using-hexmapr/</guid>
      <description>&lt;div id=&#34;neat-package-alert&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;NEAT PACKAGE ALERT!&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
My 1st R package! &lt;a href=&#34;https://t.co/dI3GJbC7FQ&#34;&gt;https://t.co/dI3GJbC7FQ&lt;/a&gt; Automatically turn geospatial polygons like states into regular/hexagonal grids &lt;a href=&#34;https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#rstats&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/ggplot2?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ggplot2&lt;/a&gt; &lt;a href=&#34;https://t.co/dxvYCZWJzU&#34;&gt;pic.twitter.com/dxvYCZWJzU&lt;/a&gt;
&lt;/p&gt;
— J Bailey (&lt;span class=&#34;citation&#34;&gt;@iammrbailey&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/iammrbailey/status/925346870381240320?ref_src=twsrc%5Etfw&#34;&gt;October 31, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;I’ve been thinking about implementing something like this for a while - got excited by this tweet I thought I would do some exploring and write out a post over the weekend. Creating a county-level hex grid of Wisconsin makes for a perfect supplment to my earlier post about &lt;a href=&#34;https://www.mikelee.co/posts/2016-12-26-wisconsin-presidential-election-results/&#34;&gt;mapping the 2016 Wisconsin presidential results&lt;/a&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;lets-make-a-hex-grid-of-wisconsin&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Let’s make a hex grid of Wisconsin&lt;/h2&gt;
&lt;p&gt;The first thing we’ll do is retrieve a Wisconsin shapefile; we can use the &lt;code&gt;tigris&lt;/code&gt; package developed by Kyle Walker to pull a 2010 census shapefile of Wisconsin counties:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tigris)
wi &amp;lt;- counties(&amp;quot;Wisconsin&amp;quot;, cb = TRUE)
wi_original &amp;lt;- wi
plot(wi)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/tigris%20shapefile-1.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We’ll then port some code from the &lt;code&gt;hexmapr&lt;/code&gt; github README:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(hexmapr)
wi_details &amp;lt;- get_shape_details(wi)
wi@data$xcentroid &amp;lt;- coordinates(wi)[,1]
wi@data$ycentroid &amp;lt;- coordinates(wi)[,2]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’re going for the closest shapefile match, preferring a final shape than looks like the outline of the state than one with appropriate placement of counties - there is rarely a perfect grid match. So let’s test a whole bunch:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# hexagon - red border for the 28th seed
png(file = &amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/hexGridWisconsin.png&amp;quot;, width = 700, height = 500)
par(mfrow=c(7,5), mar = c(0,1,2,1))
for (i in 1:35){
  new_cells &amp;lt;-  calculate_cell_size(wi, wi_details,0.03, &amp;#39;hexagonal&amp;#39;, i)
  if(i == 28) {
    plot(new_cells[[2]], main = paste(&amp;quot;Seed&amp;quot;,i, sep=&amp;quot; &amp;quot;), border = &amp;quot;red&amp;quot;)
  } else {
    plot(new_cells[[2]], main = paste(&amp;quot;Seed&amp;quot;,i, sep=&amp;quot; &amp;quot;))
  }
}

# squares - red border for the 7th seed
png(file = &amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/squareGridWisconsin.png&amp;quot;, width = 700, height = 500)
par(mfrow=c(7,5), mar = c(0,1,2,1))
for (i in 1:35){
  new_cells &amp;lt;-  calculate_cell_size(wi, wi_details,0.03, &amp;#39;regular&amp;#39;, i)
  if(i == 7) {
    plot(new_cells[[2]], main = paste(&amp;quot;Seed&amp;quot;,i, sep=&amp;quot; &amp;quot;), border = &amp;quot;red&amp;quot;)
  } else {
    plot(new_cells[[2]], main = paste(&amp;quot;Seed&amp;quot;,i, sep=&amp;quot; &amp;quot;))
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/hexGridWisconsin.png&#34; alt=&#34;hex grid options&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;hex grid options&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/squareGridWisconsin.png&#34; alt=&#34;square grid options&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;square grid options&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I like the look of the 28th hexagon grid, and the 7th square grid. Let’s take those and assign the polygons to a new &lt;code&gt;SpatialPolygonsDataFrame&lt;/code&gt;, then fortify .&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
library(ggplot2)
clean &amp;lt;- function(shape){
  shape@data$id = rownames(shape@data)
  shape.points = fortify(shape, region=&amp;quot;id&amp;quot;)
  shape.df = left_join(shape.points, shape@data, by=&amp;quot;id&amp;quot;)
}

new_cells_hex &amp;lt;-  calculate_cell_size(wi_original, wi_details,0.03, &amp;#39;hexagonal&amp;#39;, 28)
resulthex &amp;lt;- assign_polygons(wi_original,new_cells_hex)
result_df_hex &amp;lt;- clean(resulthex)

new_cells_square &amp;lt;-  calculate_cell_size(wi_original, wi_details,0.03, &amp;#39;regular&amp;#39;, 7)
resultsquare &amp;lt;- assign_polygons(wi_original,new_cells_square)
result_df_square &amp;lt;- clean(resultsquare)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now that we’ve got our modified &lt;code&gt;SpatialPolygonsDataFrame&lt;/code&gt;s - covered to a dataframe for use with ggplot2 - we can plot the result using &lt;code&gt;geom_polygon&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(viridis)
library(extrafont)
loadfonts()
theme_open_sans &amp;lt;- theme(text=element_text(family=&amp;quot;Open Sans&amp;quot;), plot.title = element_text(family = &amp;quot;Open Sans Semibold&amp;quot;, size = 24), plot.subtitle = element_text(family = &amp;quot;Open Sans Light&amp;quot;,size = 14), legend.title = element_text(family=&amp;quot;Open Sans Semibold&amp;quot;))
hexplot &amp;lt;- ggplot(result_df_hex) +
  geom_polygon(aes(x=long, y=lat, fill = as.numeric(ALAND), group = group))+
  geom_text(aes(V1, V2, label = NAME), size=2.5, color = &amp;quot;white&amp;quot;, family = &amp;quot;Open Sans&amp;quot;) +
  scale_fill_viridis() +
  guides(fill=FALSE) +
  theme_void() + theme_open_sans

hexplot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/square%20and%20hex%20plots%20of%20WI-1.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;squareplot &amp;lt;- ggplot(result_df_square) +
  geom_polygon(aes(x=long, y=lat, fill = as.numeric(ALAND), group = group))+
  geom_text(aes(V1, V2, label = NAME), size=2.5, color = &amp;quot;white&amp;quot;, family = &amp;quot;Open Sans&amp;quot;) +
  scale_fill_viridis() +
  guides(fill=FALSE) +
  theme_void() + theme_open_sans

squareplot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/square%20and%20hex%20plots%20of%20WI-2.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I saw on twitter that &lt;code&gt;sf&lt;/code&gt; can now be used natively, so I gave that I try as well. First convert the &lt;code&gt;SpatialPolygonsDataFrame&lt;/code&gt; to a simple feature (&lt;code&gt;sf&lt;/code&gt;), then plot the resultant object using &lt;code&gt;geom_sf&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sfResultSquare &amp;lt;- st_as_sf(resultsquare)
sfResultHex &amp;lt;- st_as_sf(resulthex)
class(sfResultHex)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;sf&amp;quot;         &amp;quot;data.frame&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sfHexPlot &amp;lt;-ggplot(sfResultHex) +
    geom_sf(aes(fill = as.numeric(ALAND)), color = &amp;quot;transparent&amp;quot;) +
    geom_text(aes(V1, V2, label = NAME), size=2.5, color = &amp;quot;white&amp;quot;, family = &amp;quot;Open Sans&amp;quot;) +
    scale_fill_viridis() +
    guides(fill=FALSE) +
    theme(panel.background = element_rect(fill = NA), axis.text = element_blank(), axis.ticks = element_blank(), axis.title = element_blank())

sfHexPlot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/hexgrid%20with%20sf-1.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Cool to know that’s possible! Let’s use some more novel data than land area. Building off of a previous post mapping Wisconsin presidential election results, let’s map vote totals to our new gridmaps.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(stringr)
library(tidyr)
all_results &amp;lt;- read.csv(&amp;quot;https://raw.githubusercontent.com/mkearney/presidential_election_county_results_2016/master/pres16results.csv&amp;quot;, stringsAsFactors = FALSE)

wisconsin &amp;lt;- all_results %&amp;gt;% 
  filter(str_detect(fips, &amp;quot;^55&amp;quot;))

wisconsin_spread &amp;lt;- wisconsin %&amp;gt;% 
  filter(cand %in% c(&amp;quot;Donald Trump&amp;quot;, &amp;quot;Hillary Clinton&amp;quot;)) %&amp;gt;%
  select(fips, cand, votes, total_votes) %&amp;gt;%
  spread(cand, votes)

wisconsin_spread &amp;lt;- wisconsin_spread %&amp;gt;% mutate(voteDiff = `Donald Trump` - `Hillary Clinton`,
                                                pctDiff = `Donald Trump`/total_votes - `Hillary Clinton`/total_votes,
                                                weight = total_votes/ sum(total_votes))
wisconsin_spread$weight &amp;lt;- ifelse(wisconsin_spread$pctDiff &amp;gt; 0 , -wisconsin_spread$weight, wisconsin_spread$weight)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can create some custom breaks to give counties with higher vote totals more prominence in the figure, then merge these onto our hex and square &lt;code&gt;SpatialPolygonsDataFrame&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;wisconsin_spread$breaks &amp;lt;- cut(wisconsin_spread$weight,
                               breaks = c(-1, -.1, -0.05, -0.01, 0, 0.01, .05, .1, 1),
                               labels = c(&amp;quot;R   More than 10 Percent&amp;quot;, &amp;quot;R   5 to 10 Percent&amp;quot;, &amp;quot;R   1 to 5 Percent&amp;quot;, &amp;quot;R   Less than 1 Percent&amp;quot;, 
                                          &amp;quot;D   Less than 1 Percent&amp;quot;,&amp;quot;D   1 to 5 Percent&amp;quot;, &amp;quot;D   5 to 10 Percent&amp;quot;, &amp;quot;D   More than 10 Percent&amp;quot;))
wiHex &amp;lt;- merge(result_df_hex, wisconsin_spread, by.x = &amp;quot;GEOID&amp;quot;, by.y = &amp;quot;fips&amp;quot;)
wiSquare &amp;lt;- merge(result_df_square, wisconsin_spread, by.x = &amp;quot;GEOID&amp;quot;, by.y = &amp;quot;fips&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once we’ve got our data sets finalized, figures are created usng &lt;code&gt;geom_polygon&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(RColorBrewer)

wiHexPlot &amp;lt;- ggplot(wiHex) +
    geom_polygon(aes(x=long, y=lat, fill=breaks, group = group), color = &amp;quot;#f5f5f5&amp;quot;) +
    geom_text(aes(V1, V2, label = NAME), size=2.5, color = &amp;quot;black&amp;quot;, family = &amp;quot;Open Sans&amp;quot;) +
    scale_fill_manual(name = &amp;quot;Portion of WI Vote&amp;quot;, values = brewer.pal(8, &amp;quot;RdBu&amp;quot;), drop = FALSE) +
    guides(alpha=FALSE) +
    ggtitle(label = &amp;quot;2016 Presidential Results by Wisconsin Counties&amp;quot;, subtitle = &amp;quot;59 of 72 Wisconsin counties leaned Republican, while the only two counties with\nmore than 10 percent of the state&amp;#39;s votes totaled more Democratic votes&amp;quot;) +
    theme(panel.background = element_rect(fill = NA), axis.text = element_blank(), axis.ticks = element_blank(), axis.title = element_blank()) +   
    theme_open_sans

wiHexPlot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/join%20election%20results%20to%20sf%20object-1.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;wiSquarePlot &amp;lt;- ggplot(wiSquare) +
    geom_polygon(aes(x=long, y=lat, fill=breaks, group = group), color = &amp;quot;#f5f5f5&amp;quot;) +
    geom_text(aes(V1, V2, label = NAME), size=2.5, color = &amp;quot;black&amp;quot;, family = &amp;quot;Open Sans&amp;quot;) +
    scale_fill_manual(name = &amp;quot;Percentage of WI Vote Total&amp;quot;, values = brewer.pal(8, &amp;quot;RdBu&amp;quot;), drop = FALSE) +
    guides(alpha=FALSE) +
    ggtitle(label = &amp;quot;2016 Presidential Results by Wisconsin Counties&amp;quot;, subtitle = &amp;quot;59 of 72 Wisconsin counties leaned Republican, while the only two counties with\nmore than 10 percent of the state&amp;#39;s votes totaled more Democratic votes&amp;quot;) +
    theme(panel.background = element_rect(fill = NA), axis.text = element_blank(), axis.ticks = element_blank(), axis.title = element_blank()) +   
    theme_open_sans

wiSquarePlot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-11-16-wi-presidential-results-using-hexmapr_files/figure-html/join%20election%20results%20to%20sf%20object-2.png&#34; width=&#34;1800&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>High School Attainment - Line Chart from COE 2017 Data Release</title>
      <link>/animation/2017-10-19-high-school-attainment-rates/</link>
      <pubDate>Thu, 19 Oct 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-10-19-high-school-attainment-rates/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
DYK? Gaps in HS completion rates between White students and Black and Hispanic students have narrowed. Learn more: &lt;a href=&#34;https://t.co/N6geIyokVp&#34;&gt;https://t.co/N6geIyokVp&lt;/a&gt; &lt;a href=&#34;https://t.co/tZtA6jVI30&#34;&gt;pic.twitter.com/tZtA6jVI30&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/921050270049718273?ref_src=twsrc%5Etfw&#34;&gt;October 19, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/line_High_School.gif&#34; alt=&#34;COE 2017 High School Attainment Line Graph Animation&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;COE 2017 High School Attainment Line Graph Animation&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Percent of Borrowers by Cohort - Animated Bar Chart</title>
      <link>/animation/2017-10-14-animated-bar-chart-percent-borrowers-by-cohort/</link>
      <pubDate>Sat, 14 Oct 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-10-14-animated-bar-chart-percent-borrowers-by-cohort/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
NEW RELEASE: View the % of borrowers who took out fed &lt;a href=&#34;https://twitter.com/hashtag/studentloans?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#studentloans&lt;/a&gt; within 12 years of starting &lt;a href=&#34;https://twitter.com/hashtag/postsec?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#postsec&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/education?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#education&lt;/a&gt; &lt;a href=&#34;https://t.co/QRmwQMJGG0&#34;&gt;https://t.co/QRmwQMJGG0&lt;/a&gt; &lt;a href=&#34;https://t.co/ADugSRBrcB&#34;&gt;pic.twitter.com/ADugSRBrcB&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/916332882213457921?ref_src=twsrc%5Etfw&#34;&gt;October 6, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/barChart_Loans.gif&#34; alt=&#34;Percent of Borrowers by Cohort After 12 Years&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Percent of Borrowers by Cohort After 12 Years&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Median Debt By Educational Attainment - Animated Bar Chart</title>
      <link>/animation/2017-10-05-animated-bar-chart-twelve-year-debt/</link>
      <pubDate>Thu, 05 Oct 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-10-05-animated-bar-chart-twelve-year-debt/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
What was the median amount owed by federal student loan borrowers 12 years after starting &lt;a href=&#34;https://twitter.com/hashtag/postsec?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#postsec&lt;/a&gt; ed? &lt;a href=&#34;https://t.co/QRmwQMJGG0&#34;&gt;https://t.co/QRmwQMJGG0&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/HigherEd?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#HigherEd&lt;/a&gt; &lt;a href=&#34;https://t.co/a6JmSm64Iw&#34;&gt;pic.twitter.com/a6JmSm64Iw&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/915993158546313217?ref_src=twsrc%5Etfw&#34;&gt;October 5, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/barChartLoans_Debt.gif&#34; alt=&#34;Twelve Year Median Debt Bar Chart&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Twelve Year Median Debt Bar Chart&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Charter School Enrollment, 2005 to 2015 - Animated State Grid Map</title>
      <link>/animation/2017-09-22-animated-charter-enrollment-state-grid-map/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-09-22-animated-charter-enrollment-state-grid-map/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
Learn about enrollment growth in &lt;a href=&#34;https://twitter.com/hashtag/CharterSchools?src=hash&#34;&gt;#CharterSchools&lt;/a&gt; by exploring our &lt;a href=&#34;https://twitter.com/hashtag/COE2017?src=hash&#34;&gt;#COE2017&lt;/a&gt; indicator: &lt;a href=&#34;https://t.co/5fYKCqMGH7&#34;&gt;https://t.co/5fYKCqMGH7&lt;/a&gt; &lt;a href=&#34;https://t.co/dBY4YdriCx&#34;&gt;pic.twitter.com/dBY4YdriCx&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/910615129343000576&#34;&gt;September 20, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/charter_State.gif&#34; alt=&#34;Charter School Enrollment State Grid Map&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Charter School Enrollment State Grid Map&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Teacher-Pupil Ratio: Line Chart from COE 2017 Data Release</title>
      <link>/animation/2017-09-16-animated-line-chart-pupil-ratio/</link>
      <pubDate>Sat, 16 Sep 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-09-16-animated-line-chart-pupil-ratio/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
How has the U.S. pupil/teacher ratio changed over time? &lt;a href=&#34;https://t.co/FmTFWac11L&#34;&gt;https://t.co/FmTFWac11L&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/teaching?src=hash&#34;&gt;#teaching&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/EdData?src=hash&#34;&gt;#EdData&lt;/a&gt; &lt;a href=&#34;https://t.co/YdttjORDPn&#34;&gt;pic.twitter.com/YdttjORDPn&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/908016978459283456&#34;&gt;September 13, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/line_pupil.gif&#34; alt=&#34;COE 2017 Pupil Ratio Line Graph Animation&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;COE 2017 Pupil Ratio Line Graph Animation&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Educational Attainment - Line Chart from COE 2017 Data Release</title>
      <link>/animation/2017-09-09-animated-line-chart-bachelors-attainment/</link>
      <pubDate>Sat, 09 Sep 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-09-09-animated-line-chart-bachelors-attainment/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here:&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
Gaps remain in &lt;a href=&#34;https://twitter.com/hashtag/HigherEd?src=hash&#34;&gt;#HigherEd&lt;/a&gt; attainment between Whites, Blacks, and Hispanics. View more details in the &lt;a href=&#34;https://twitter.com/hashtag/COE2017?src=hash&#34;&gt;#COE2017&lt;/a&gt;: &lt;a href=&#34;https://t.co/N6geIyokVp&#34;&gt;https://t.co/N6geIyokVp&lt;/a&gt; &lt;a href=&#34;https://t.co/33JoRPmzbO&#34;&gt;pic.twitter.com/33JoRPmzbO&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/903305999636946945&#34;&gt;August 31, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/line_Bachelors.gif&#34; alt=&#34;COE 2017 Bachelors Attainment Line Graph Animation&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;COE 2017 Bachelors Attainment Line Graph Animation&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Makeover Monday: WSJ Measles Vaccination Chart</title>
      <link>/animation/2017-07-10-makeover-monday-wsj-measles-vaccination-chart/</link>
      <pubDate>Mon, 10 Jul 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/animation/2017-07-10-makeover-monday-wsj-measles-vaccination-chart/</guid>
      <description>&lt;p&gt;Last week I wrote a post about recreating the WSJ measles vaccination chart as an animated cartogram - you can check out the full write-up of the development here: &lt;a href=&#34;www.mikelee.co/posts/2017-06-28-wsj-measles-vaccination-chart/&#34; class=&#34;uri&#34;&gt;www.mikelee.co/posts/2017-06-28-wsj-measles-vaccination-chart/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It was featured on DataCamp across all their &lt;a href=&#34;https://www.linkedin.com/feed/update/urn:li:activity:6288400911173709824&#34;&gt;social&lt;/a&gt; &lt;a href=&#34;https://twitter.com/DataCamp/status/882634632935735296&#34;&gt;media&lt;/a&gt; &lt;a href=&#34;https://www.facebook.com/permalink.php?story_fbid=1656557754368698&amp;amp;id=726282547396228&#34;&gt;platforms&lt;/a&gt; - pretty neat!&lt;/p&gt;
&lt;p&gt;A comment from one of the readers (which disqus seems to have overwritten as I was re-initializing my site) read as so:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Your measles chart is a beautiful piece of work! No question. The (vertical) sorting merely by alphabetic state listing, however, adds nothing to the information. Even better, I think, would be to place these stats on a US map. The animation would then show the geographic progress of the disease. Try first on a state basis; counties would be too confusing The ultimate presentation, however, would show the importance of high population densities (metropolitan areas). - Kenneth Holland.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s an interesting idea Kenneth!&lt;/p&gt;
&lt;p&gt;I wonder whether a similar type of graphic representation was considered by the WSJ authors. Either way, this is a great excuse to jump on the &lt;a href=&#34;http://www.makeovermonday.co.uk/&#34;&gt;Makeover Monday&lt;/a&gt; train.&lt;/p&gt;
&lt;div id=&#34;makeover-the-wsj-measles-incidence-visualization-as-a-cartogram&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Makeover the WSJ Measles Incidence Visualization as a Cartogram&lt;/h2&gt;
&lt;p&gt;Given that I’ve already completed the data acquisition and manipulation in my previous post, I’ll jump right into plotting the state level data. The county-level piece is an interesting idea, but I’ll leave that for someone else!&lt;/p&gt;
&lt;p&gt;Here is the final result:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/measlesCartogram.gif&#34; alt=&#34;Measles Animation Cartogram&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Measles Animation Cartogram&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I customized the plot in a few ways - first, I chose to represent the change in time via a timeline above the cartogram. Other developers have represented change in time using years as text - such as the &lt;a href=&#34;https://i.imgur.com/a2BEHjL.gif&#34;&gt;Financial Times’ income distribution gif&lt;/a&gt; (their original post &lt;a href=&#34;https://www.ft.com/content/98ce14ee-99a6-11e5-95c7-d47aa298f769?mhq5j=e2&#34;&gt;here&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;I selected a moving dot for a few reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;given the large selection of years, a frequently changing portion of the image would be a distraction&lt;/li&gt;
&lt;li&gt;the movement of the dot is an intuitive representation of change over time&lt;/li&gt;
&lt;li&gt;the point could be encoded with data - the color represents the national mean incidence!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final product is a quality alternative to the WSJ’s original visualization, though I prefer the original representation as a full grid over years - the drastic reduction in measles incidence is more impactful with 30+ years of negligible incidence stacked up next to each other. Have other thoughts? Leave them in the comments - hopefully disqus doesn’t delete em this time :p&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Makeover Monday: WSJ Measles Vaccination Chart</title>
      <link>/posts/2017-07-10-makeover-monday-wsj-measles-vaccination-chart/</link>
      <pubDate>Mon, 10 Jul 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/posts/2017-07-10-makeover-monday-wsj-measles-vaccination-chart/</guid>
      <description>&lt;p&gt;Last week I wrote a post about recreating the WSJ measles vaccination chart as an animated cartogram - you can check out the full write-up of the development here: &lt;a href=&#34;www.mikelee.co/posts/2017-06-28-wsj-measles-vaccination-chart/&#34; class=&#34;uri&#34;&gt;www.mikelee.co/posts/2017-06-28-wsj-measles-vaccination-chart/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It was featured on DataCamp across all their &lt;a href=&#34;https://www.linkedin.com/feed/update/urn:li:activity:6288400911173709824&#34;&gt;social&lt;/a&gt; &lt;a href=&#34;https://twitter.com/DataCamp/status/882634632935735296&#34;&gt;media&lt;/a&gt; &lt;a href=&#34;https://www.facebook.com/permalink.php?story_fbid=1656557754368698&amp;amp;id=726282547396228&#34;&gt;platforms&lt;/a&gt; - pretty neat!&lt;/p&gt;
&lt;p&gt;A comment from one of the readers (which disqus seems to have overwritten as I was re-initializing my site) read as so:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Your measles chart is a beautiful piece of work! No question. The (vertical) sorting merely by alphabetic state listing, however, adds nothing to the information. Even better, I think, would be to place these stats on a US map. The animation would then show the geographic progress of the disease. Try first on a state basis; counties would be too confusing The ultimate presentation, however, would show the importance of high population densities (metropolitan areas). - Kenneth Holland.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s an interesting idea Kenneth!&lt;/p&gt;
&lt;p&gt;I wonder whether a similar type of graphic representation was considered by the WSJ authors. Either way, this is a great excuse to jump on the &lt;a href=&#34;http://www.makeovermonday.co.uk/&#34;&gt;Makeover Monday&lt;/a&gt; train.&lt;/p&gt;
&lt;div id=&#34;makeover-the-wsj-measles-incidence-visualization-as-a-cartogram&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Makeover the WSJ Measles Incidence Visualization as a Cartogram&lt;/h2&gt;
&lt;p&gt;Given that I’ve already completed the data acquisition and manipulation in my previous post, I’ll jump right into plotting the state level data. The county-level piece is an interesting idea, but I’ll leave that for someone else!&lt;/p&gt;
&lt;p&gt;Here is the final result:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/measlesCartogram.gif&#34; alt=&#34;Measles Animation Cartogram&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Measles Animation Cartogram&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I customized the plot in a few ways - first, I chose to represent the change in time via a timeline above the cartogram. Other developers have represented change in time using years as text - such as the &lt;a href=&#34;https://i.imgur.com/a2BEHjL.gif&#34;&gt;Financial Times’ income distribution gif&lt;/a&gt; (their original post &lt;a href=&#34;https://www.ft.com/content/98ce14ee-99a6-11e5-95c7-d47aa298f769?mhq5j=e2&#34;&gt;here&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;I selected a moving dot for a few reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;given the large selection of years, a frequently changing portion of the image would be a distraction&lt;/li&gt;
&lt;li&gt;the movement of the dot is an intuitive representation of change over time&lt;/li&gt;
&lt;li&gt;the point could be encoded with data - the color represents the national mean incidence!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final product is a quality alternative to the WSJ’s original visualization, though I prefer the original representation as a full grid over years - the drastic reduction in measles incidence is more impactful with 30+ years of negligible incidence stacked up next to each other. Have other thoughts? Leave them in the comments - hopefully disqus doesn’t delete em this time :p&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Animated Line Chart from Condition of Education 2017 Data Release</title>
      <link>/posts/2017-06-28-animated-line-chart-coe-bullying/</link>
      <pubDate>Wed, 28 Jun 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/posts/2017-06-28-animated-line-chart-coe-bullying/</guid>
      <description>&lt;div id=&#34;animation-seen-here&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation seen here!&lt;/h2&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
New from &lt;a href=&#34;https://twitter.com/hashtag/COE2017?src=hash&#34;&gt;#COE2017&lt;/a&gt;: 21% of students reported being bullied at school in 2015, a ↓ from the 28% reported in 2005. &lt;a href=&#34;https://t.co/5BlyLdHS9W&#34;&gt;https://t.co/5BlyLdHS9W&lt;/a&gt; &lt;a href=&#34;https://t.co/Fr1pTt8xca&#34;&gt;pic.twitter.com/Fr1pTt8xca&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/859807520881344512&#34;&gt;May 3, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;full-image&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Full image:&lt;/h2&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/line_graph_bullying.gif&#34; alt=&#34;COE 2017 Bullying Line Graph Animation&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;COE 2017 Bullying Line Graph Animation&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Reproducing the WSJ Measles Vaccination Chart Using R</title>
      <link>/posts/2017-06-28-wsj-measles-vaccination-chart/</link>
      <pubDate>Wed, 28 Jun 2017 00:00:00 +0000</pubDate>
      <author>mdlee12@gmail.com (Michael Lee)</author>
      <guid>/posts/2017-06-28-wsj-measles-vaccination-chart/</guid>
      <description>&lt;div id=&#34;mastering-animation-in-r&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Mastering Animation in R&lt;/h2&gt;
&lt;p&gt;Recently I’ve been working on creating gif animations for &lt;a href=&#34;https://twitter.com/EdNCES/status/859807520881344512&#34;&gt;social media&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
New from &lt;a href=&#34;https://twitter.com/hashtag/COE2017?src=hash&#34;&gt;#COE2017&lt;/a&gt;: 21% of students reported being bullied at school in 2015, a ↓ from the 28% reported in 2005. &lt;a href=&#34;https://t.co/5BlyLdHS9W&#34;&gt;https://t.co/5BlyLdHS9W&lt;/a&gt; &lt;a href=&#34;https://t.co/Fr1pTt8xca&#34;&gt;pic.twitter.com/Fr1pTt8xca&lt;/a&gt;
&lt;/p&gt;
— NCES (&lt;span class=&#34;citation&#34;&gt;@EdNCES&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/EdNCES/status/859807520881344512&#34;&gt;May 3, 2017&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;It’s pretty addicting! And not as complicated as it appears. Let’s walk through the creation of a gif using R.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;wall-street-journal-measles-vaccination-chart&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Wall Street Journal Measles Vaccination Chart&lt;/h2&gt;
&lt;p&gt;One of the more compelling data visualizations produced in recent years is the following representation of measles incidence from 1928 to 2003 produced by the Wall Street Journal graphics team:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/measles.png&#34; alt=&#34;Wall Street Journal&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Wall Street Journal&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;In the two years after its release, many prominent data journalists, designers, and developers have analyzed/applauded the design decisions in the chart, which urge the reader to its take-home message: the introduction of the measles vaccine &lt;strong&gt;drastically&lt;/strong&gt; reduced the incidence of the virus.&lt;/p&gt;
&lt;p&gt;Recognizing it’s merit, let’s accentuate that take-home message by adding the element of animation.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;download-dependent-packages-and-prep-the-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Download dependent packages and prep the data&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(reshape2)
library(dplyr)
library(extrafont)
library(ggplot2)
library(gganimate)
library(animation)
library(grid)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’ll use &lt;code&gt;reshape2&lt;/code&gt; and &lt;code&gt;dplyr&lt;/code&gt; to manipulate the data, &lt;code&gt;ggplot2&lt;/code&gt; to plot it, &lt;code&gt;gganimate&lt;/code&gt; for a first animation exploration, and &lt;code&gt;animation&lt;/code&gt; and &lt;code&gt;grid&lt;/code&gt; for a customized finished product.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;download-and-prep-the-data-everything-is-a-remix&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Download and prep the data (&lt;a href=&#34;https://vimeo.com/139094998&#34;&gt;everything is a remix&lt;/a&gt;)&lt;/h2&gt;
&lt;p&gt;The heavy data prep and plotting for this plot has been done already! Much of this code comes from [this site] (&lt;a href=&#34;https://benjaminlmoore.wordpress.com/2015/04/09/recreating-the-vaccination-heatmaps-in-r/&#34; class=&#34;uri&#34;&gt;https://benjaminlmoore.wordpress.com/2015/04/09/recreating-the-vaccination-heatmaps-in-r/&lt;/a&gt;), with small improvements and the inclusion of some omitted pieces. From that site, I’ve relinked the steps to download the data:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Register and login to “Project Tycho“&lt;/li&gt;
&lt;li&gt;Go to level 1 data, then Search and retrieve data&lt;/li&gt;
&lt;li&gt;Now change a couple of options: geographic level := state; disease outcome := incidence&lt;/li&gt;
&lt;li&gt;Add all states (highlight all at once with Ctrl+A (or Cmd+A on Macs)&lt;/li&gt;
&lt;li&gt;Hit submit and scroll down to Click here to download results to excel&lt;/li&gt;
&lt;li&gt;Open in excel and export to CSV&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Once we’ve got the data and you’ve set your working directory, lets read in the file and reshape it:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;measles &amp;lt;- read.csv(&amp;quot;/home/michael/Documents/animation_samples/measles/measles.csv&amp;quot;, skip=2)
measles &amp;lt;- melt(measles, id.var=c(&amp;quot;YEAR&amp;quot;, &amp;quot;WEEK&amp;quot;))
colnames(measles) &amp;lt;- c(&amp;quot;year&amp;quot;, &amp;quot;week&amp;quot;, &amp;quot;state&amp;quot;, &amp;quot;cases&amp;quot;)
measles$cases &amp;lt;- ifelse(measles$cases==&amp;quot;\u002D&amp;quot;,NA,measles$cases)
measles$cases &amp;lt;- as.numeric(measles$cases)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;One piece I wanted to replicate was the state abbreviations used in the figure. I used the &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_U.S._state_abbreviations&#34;&gt;AP style guide&lt;/a&gt;, and you can access that csv through &lt;a href=&#34;https://mikelee.co/data/stateName.csv&#34;&gt;this link&lt;/a&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;stateAP &amp;lt;- read.csv(&amp;quot;/home/michael/Documents/animation_samples/measles/stateName.csv&amp;quot;)
stateAP$stateName &amp;lt;- toupper(stateAP$stateName)
measles$state &amp;lt;- stateAP$stateAP[match(measles$state,stateAP$stateName)]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, we’ll create our measles data frame by summarizing the incidence of measles occurring in each state by year, while also recoding instances in which state’s have no incidence/values for a given year as NAs.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mdf &amp;lt;- measles %&amp;gt;% group_by(state, year) %&amp;gt;% 
  summarise(incidence=if(all(is.na(cases))) NA else
    sum(cases, na.rm=T))
mdf$state &amp;lt;- factor(mdf$state, levels=rev(levels(mdf$state)))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;create-the-figure-using-ggplot2&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Create the figure using &lt;code&gt;ggplot2&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;We’ll pull the colors directly from the &lt;a href=&#34;http://graphics.wsj.com/infectious-diseases-and-vaccines/js/script.min.js&#34;&gt;WSJ javascript source code&lt;/a&gt;. We’ll also load the &lt;em&gt;Open Sans&lt;/em&gt; family of fonts via &lt;code&gt;loadfonts()&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cols&amp;lt;- c(&amp;quot;#e7f0fa&amp;quot;, #lighter than light blue
         &amp;quot;#c9e2f6&amp;quot;, #light blue
         &amp;quot;#95cbee&amp;quot;, #blue
         &amp;quot;#0099dc&amp;quot;, #darker blue
         &amp;quot;#4ab04a&amp;quot;, #green
         &amp;quot;#ffd73e&amp;quot;, #yellow
         &amp;quot;#eec73a&amp;quot;, #mustard
         &amp;quot;#e29421&amp;quot;, #dark khaki (?)
         &amp;quot;#f05336&amp;quot;, #orange red
         &amp;quot;#ce472e&amp;quot;) #red
extrafont::loadfonts()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Nifty!&lt;/p&gt;
&lt;p&gt;Let’s shift to making the plot. The majority of the figure is generated via these three function calls:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg &amp;lt;- ggplot(mdf, aes(y=state, x=year, fill=incidence)) + 
  geom_tile(colour=&amp;quot;white&amp;quot;,
            width=.9, height=.9) + theme_minimal() +
  scale_fill_gradientn(colours=cols, limits=c(0, 4000),
                       values=c(0, 0.01, 0.02, 0.03, 0.09, 0.1, .15, .25, .4, .5, 1), 
                       na.value=rgb(246, 246, 246, max=255),
                       labels=c(&amp;quot;0k&amp;quot;, &amp;quot;1k&amp;quot;, &amp;quot;2k&amp;quot;, &amp;quot;3k&amp;quot;, &amp;quot;4k&amp;quot;),
                       guide=guide_colourbar(ticks=T, nbin=50,
                                             barheight=.5, label=T, 
                                             barwidth=10))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The most contentious design decision made by the WSJ authors is undoubtedly the color scale. Aligning gradient color values (in our chart as &lt;code&gt;values=c(0, 0.01, 0.02, 0.03, 0.09, 0.1, .15, .25, .4, .5, 1)&lt;/code&gt;) so that one portion of the scale is weighted more prominently than the other accentuates the message of the chart; some might see this as ambiguous or misleading - it’s challenging to ascribe what value a given color stands for. Once we have the skeleton for our plot, we can add an appropriate x axis scale, vaccine introduction line, and figure labels:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg &amp;lt;- gg +
  scale_x_continuous(expand=c(0,0), 
                     breaks=seq(1930, 2010, by=10)) +
  geom_segment(x=1963, xend=1963, y=0, yend=51.5, size=.9) +
  labs(x=&amp;quot;&amp;quot;, y=&amp;quot;&amp;quot;, fill=&amp;quot;&amp;quot;) +
  ggtitle(&amp;quot;Measles&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, we’ll add in our theme.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg &amp;lt;- gg +
  theme(legend.position=c(.5, -.13),
        legend.direction=&amp;quot;horizontal&amp;quot;,
        legend.text=element_text(colour=&amp;quot;grey20&amp;quot;),
        plot.margin=grid::unit(c(.5,.5,1.5,.5), &amp;quot;cm&amp;quot;),
        axis.text.y=element_text(size=6, family=&amp;quot;Open Sans Regular&amp;quot;, 
                                 hjust=1),
        axis.text.x=element_text(size=8, family=&amp;quot;Open Sans Regular&amp;quot;),
        axis.ticks.y=element_blank(),
        panel.grid=element_blank(),
        title=element_text(hjust=-.07, vjust=1, 
                           family=&amp;quot;Open Sans Semibold&amp;quot;),
        text=element_text(family=&amp;quot;Open Sans&amp;quot;)) +
  annotate(&amp;quot;text&amp;quot;, label=&amp;quot;Vaccine introduced&amp;quot;, x=1963, y=53, 
           vjust=1, hjust=0, size=I(3), family=&amp;quot;Open Sans&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Voila!&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/2017-06-28-wsj-measles-vaccination-chart_files/figure-html/gg-1.png&#34; width=&#34;1260&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;explore-the-ggplot2-object-with-gganimate&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Explore the &lt;code&gt;ggplot2&lt;/code&gt; object with &lt;code&gt;gganimate&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;It’s dang easy to create an animation using &lt;code&gt;gganimate&lt;/code&gt;. Just add &lt;code&gt;frame&lt;/code&gt; to the initial ggplot2 call and you’re good to go! In our plot, we’ll want to iterate over the data years, so &lt;code&gt;.frame = year&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gganimate(gg, &amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/gganimate_measles.gif&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/gganimate_measles.gif&#34; alt=&#34;Measles Animation using gganimate&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Measles Animation using gganimate&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;That’s a great start! Though this could be further developed using &lt;code&gt;gganimate&lt;/code&gt; I prefer to use the &lt;code&gt;animation&lt;/code&gt; package’s &lt;code&gt;saveGIF&lt;/code&gt; function since I prefer the method in which multiple images can be called within one call.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;refine-our-gif-using-animation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Refine our gif using &lt;code&gt;animation&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The main idea behind creating our animation will be iteratively printing images of larger subsets of our data set. In the for-loop, &lt;code&gt;subset(mdf, year&amp;lt;=1928+i-1)&lt;/code&gt; takes the i-th value to subset the data year used in the figure. For example, for i==5, the data years 1928 through 1932 will appear in that image.&lt;/p&gt;
&lt;p&gt;Besides this change, and the addition of &lt;code&gt;frame=year&lt;/code&gt;, our ggplot2 call is nearly the same (I bumped up the font sizes to correspond with a larger image size). One supplement to the chart is the addition of pauses at critical points in the figure: in 1963 (when the measles vaccine was introduced) and in 2003 (the final data year of the figure). We’ll use if statements to determine whether pieces of the plot should be “drawn” given the circumstances of the subset. Here’s our final code:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;saveGIF(
  for (i in 1:76) {
    
    gg &amp;lt;- ggplot(subset(mdf, year&amp;lt;=1928+i-1), aes(y=state, x=year, fill=incidence, frame=year)) + 
      geom_tile(colour=&amp;quot;white&amp;quot;, 
                width=.9, height=.9) + theme_minimal() +
      scale_fill_gradientn(colours=cols, limits=c(0, 4000),
                           values=c(0,0.01, 0.02, 0.03, 0.09, 0.1, .15, .25, .4, .5,1), 
                           na.value=rgb(246, 246, 246, max=255),
                           labels=c(&amp;quot;0k&amp;quot;, &amp;quot;1k&amp;quot;, &amp;quot;2k&amp;quot;, &amp;quot;3k&amp;quot;, &amp;quot;4k&amp;quot;),
                           guide=guide_colourbar(ticks=T, nbin=50,
                                                 barheight=2, label=T, 
                                                 barwidth=40)) +
      scale_x_continuous(expand=c(0,0), 
                         breaks=seq(1930, 2010, by=10), limits = c(1928,2003))
    
        # add in vertical line for data year &amp;gt;= 1963 (when the vaccine was introduced) 
      if(max(subset(mdf, year&amp;lt;=1928+i-1)$year) &amp;gt;= 1963) {
        
     gg &amp;lt;- gg + geom_segment(x=1963, xend=1963, y=0, yend=51.5, size=1.5) +
          annotate(&amp;quot;text&amp;quot;, label=&amp;quot;Vaccine introduced&amp;quot;, x=1963, y=53, 
                   vjust=1, hjust=0, size=I(10), family=&amp;quot;Open Sans&amp;quot;)
      } else {
        # doesn&amp;#39;t add vertical lineif before 1963! instead annotate with text &amp;quot;&amp;quot;
        gg &amp;lt;- gg +
          annotate(&amp;quot;text&amp;quot;, label=&amp;quot;&amp;quot;, x=1963, y=53, 
                   vjust=1, hjust=0, size=I(10), family=&amp;quot;Open Sans&amp;quot;)
      }
    gg &amp;lt;- gg + labs(x=&amp;quot;&amp;quot;, y=&amp;quot;&amp;quot;, fill=&amp;quot;&amp;quot;) +
      ggtitle(&amp;quot;Measles&amp;quot;) +
      theme(legend.position=c(.5, -.075),
            legend.direction=&amp;quot;horizontal&amp;quot;,
            legend.text=element_text(colour=&amp;quot;grey20&amp;quot;, size = 22, family=&amp;quot;Open Sans Regular&amp;quot;),
            plot.margin=grid::unit(c(.5,.5,2.5,.5), &amp;quot;cm&amp;quot;),
            axis.text.y=element_text(size=22, family=&amp;quot;Open Sans Regular&amp;quot;, 
                                     hjust=1),
            axis.text.x=element_text(size=22,family=&amp;quot;Open Sans Regular&amp;quot;,margin=margin(10,0,0,0,&amp;quot;pt&amp;quot;)),
            axis.ticks.y=element_blank(),
            axis.line.x=element_line(colour = &amp;quot;grey50&amp;quot;),
            axis.ticks.length=unit(.5, &amp;quot;cm&amp;quot;),
            axis.ticks.x=element_line(colour = &amp;quot;grey50&amp;quot;),
            panel.grid=element_blank(),
            title=element_text(hjust=-.07, vjust=1, size = 36,
                               family=&amp;quot;Open Sans Semibold&amp;quot;),
            text=element_text(family=&amp;quot;Open Sans&amp;quot;))

    # adding in pauses for data year == 1963 (when the vaccine was introduced) and 2003 (the last year in our data)
    # the replicate() function will take a ggplot2 object and print it n-times via grid.draw()
    if(max(subset(mdf, year&amp;lt;=1928+i-1)$year) == 1963) {
      replicate(30,grid.draw(gg))
    } else if (max(subset(mdf, year&amp;lt;=1928+i-1)$year) == 2003) {
        replicate(30,grid.draw(gg))
  } else {
  print(gg)
}
  }
  ,movie.name=&amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/measles.gif&amp;quot;,interval = .1, ani.width = 2050, ani.height = 1550)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/img/measles.gif&#34; alt=&#34;Measles Animation using animation&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Measles Animation using animation&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;addendum---gif-file-size-management&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Addendum - Gif File Size Management:&lt;/h3&gt;
&lt;p&gt;Customized gifs can get super large. The version above tops of at 73.4 MB! We’ll need to reduce that size for . One source for an #rstats solution is this site -&lt;a href=&#34;http://stla.github.io/stlapblog/posts/AnimatedGifs.html&#34; class=&#34;uri&#34;&gt;http://stla.github.io/stlapblog/posts/AnimatedGifs.html&lt;/a&gt; - which uses the open source tool &lt;a href=&#34;https://github.com/kohler/gifsicle&#34;&gt;gifsicle&lt;/a&gt; to reduce gif file sizes. Let’s port this author’s &lt;code&gt;gif_compress&lt;/code&gt; script to minimize our measles gif:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gif_compress &amp;lt;- function(ingif, outgif, show=TRUE, extra.opts=&amp;quot;&amp;quot;){
  command &amp;lt;-  sprintf(&amp;quot;gifsicle -O3 %s &amp;lt; %s &amp;gt; %s&amp;quot;, extra.opts, ingif, outgif)
  system.fun &amp;lt;- if (.Platform$OS.type == &amp;quot;windows&amp;quot;) shell else system
  if(show) message(&amp;quot;Executing: &amp;quot;, strwrap(command, exdent = 2, prefix = &amp;quot;\n&amp;quot;))
  system.fun(ifelse(.Platform$OS.type == &amp;quot;windows&amp;quot;, sprintf(&amp;quot;\&amp;quot;%s\&amp;quot;&amp;quot;, shQuote(command)), command))
}
gif_compress(&amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/measles.gif&amp;quot;,&amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/measlesCompressed.gif&amp;quot;,extra.opts=&amp;quot;--colors 256&amp;quot;)

file.size(&amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/measles.gif&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 73367241&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;file.size(&amp;quot;/home/michael/Documents/mikeleeco.github.com/static/img/measlesCompressed.gif&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 24104452&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Still large but more manageable.&lt;/p&gt;
&lt;p&gt;Interested in learning more? Hire me to consult on your next project, follow me on &lt;a href=&#34;https://twitter.com/mikeleeco&#34;&gt;twitter&lt;/a&gt;, leave a comment, or contact me via &lt;a href=&#34;mailto:mdlee12@gmail.com&#34;&gt;email&lt;/a&gt;. All inquiries welcome!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>